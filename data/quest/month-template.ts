import { QuestMonthProgram } from '@/types/quest';

export const monthTemplate: QuestMonthProgram = {
  id: 'month-01-awareness-foundation',
  version: '1.0.0',
  monthIndex: 1,
  title: 'Month 1: Awareness Foundation',
  theme: 'Self-observation and gentle structure',
  intent: 'Build baseline awareness, notice patterns, and establish simple rituals.',
  focusAreas: ['attention', 'energy', 'habits'],
  narrative: {
    role: 'Observer',
    opening: 'You enter the quest as an observer. The goal is to notice without judgment.',
    closing: 'You leave the month with a clear baseline and a map of key patterns.',
  },
  source: {
    mode: 'template',
    signals: ['baseline month', 'low intensity', 'foundation'],
    notes: 'Use before personalized months or as a safe fallback.',
  },
  constraints: {
    maxWeeklyTasks: 6,
    maxDailyTasks: 3,
    allowSkip: true,
    skipPolicy: 'You may skip up to 2 tasks per week without penalty.',
    repeatPolicy: 'You may repeat any completed task to gain confidence.',
  },
  tasks: [
    {
      id: 'task-observer-log',
      title: 'Observer log',
      summary: 'Write short notes about energy, triggers, and wins.',
      kind: 'habit',
      cadence: 'daily',
      effort: 'low',
      durationMinutes: 5,
      instructions: [
        'Morning: rate energy from 1-5.',
        'Evening: note one trigger and one win.',
        'Keep it short and factual.',
      ],
      completionCriteria: 'At least 2 notes completed in a day.',
      optional: false,
      tags: ['awareness', 'journal'],
      relatedSkills: ['self-observation'],
    },
    {
      id: 'task-micro-pause',
      title: 'Micro pause',
      summary: 'Take three short pauses to reset attention.',
      kind: 'habit',
      cadence: 'daily',
      effort: 'low',
      durationMinutes: 3,
      instructions: [
        'Set a reminder for three moments in the day.',
        'Pause, breathe slowly for 30 seconds, and label your current state.',
      ],
      completionCriteria: 'Three pauses completed in a day.',
      optional: false,
      tags: ['attention', 'reset'],
      relatedSkills: ['emotional regulation'],
    },
    {
      id: 'task-energy-audit',
      title: 'Energy audit',
      summary: 'Map activities that drain or recharge you.',
      kind: 'mission',
      cadence: 'one_time',
      effort: 'medium',
      durationMinutes: 40,
      instructions: [
        'List 5 activities that drain energy.',
        'List 5 activities that recharge energy.',
        'Pick one quick change for the next week.',
      ],
      completionCriteria: 'Two lists created and one change selected.',
      optional: false,
      tags: ['energy', 'planning'],
    },
    {
      id: 'task-trigger-map',
      title: 'Trigger map',
      summary: 'Capture common trigger patterns and responses.',
      kind: 'mission',
      cadence: 'weekly',
      effort: 'medium',
      durationMinutes: 30,
      instructions: [
        'Pick one difficult moment from the week.',
        'Write: situation, feelings, reaction, better response.',
      ],
      completionCriteria: 'One trigger map completed each week.',
      optional: false,
      tags: ['awareness', 'patterns'],
    },
    {
      id: 'task-sleep-window',
      title: 'Sleep window',
      summary: 'Keep a stable sleep window at least 4 days a week.',
      kind: 'support',
      cadence: 'weekly',
      effort: 'medium',
      durationMinutes: 0,
      instructions: [
        'Set a preferred sleep window.',
        'Aim to follow it at least 4 days each week.',
      ],
      completionCriteria: 'Sleep window kept 4 days in a week.',
      optional: true,
      tags: ['energy', 'recovery'],
    },
    {
      id: 'task-weekly-review',
      title: 'Weekly review',
      summary: 'Review logs and select one adjustment.',
      kind: 'reflection',
      cadence: 'weekly',
      effort: 'low',
      durationMinutes: 20,
      instructions: [
        'Read your observer logs.',
        'Choose one thing to keep and one to change.',
      ],
      completionCriteria: 'One review and one adjustment recorded each week.',
      optional: false,
      tags: ['reflection', 'planning'],
    },
  ],
  schedule: {
    weeks: [
      {
        weekIndex: 1,
        title: 'Week 1: Baseline map',
        focus: 'Track energy and attention',
        taskIds: ['task-observer-log', 'task-micro-pause', 'task-energy-audit', 'task-weekly-review'],
      },
      {
        weekIndex: 2,
        title: 'Week 2: Triggers',
        focus: 'Notice repeating patterns',
        taskIds: ['task-observer-log', 'task-micro-pause', 'task-trigger-map', 'task-weekly-review'],
      },
      {
        weekIndex: 3,
        title: 'Week 3: Recovery',
        focus: 'Stabilize energy',
        taskIds: ['task-observer-log', 'task-micro-pause', 'task-sleep-window', 'task-weekly-review'],
      },
      {
        weekIndex: 4,
        title: 'Week 4: Integration',
        focus: 'Keep what works',
        taskIds: ['task-observer-log', 'task-micro-pause', 'task-trigger-map', 'task-weekly-review'],
      },
    ],
    rituals: [
      {
        id: 'ritual-kickoff',
        title: 'Monthly kickoff',
        cadence: 'monthly',
        steps: [
          'Choose your primary focus area.',
          'Write your baseline expectation for the month.',
        ],
        taskIds: ['task-energy-audit'],
      },
      {
        id: 'ritual-weekly-review',
        title: 'Weekly review ritual',
        cadence: 'weekly',
        steps: ['Read the observer log.', 'Write one adjustment for the next week.'],
        taskIds: ['task-weekly-review'],
      },
      {
        id: 'ritual-closure',
        title: 'Month closing',
        cadence: 'monthly',
        steps: ['Complete the end-of-month check-in.', 'Celebrate one win.'],
      },
    ],
  },
  checkpoints: [
    {
      id: 'checkpoint-mid',
      label: 'Mid-month pulse',
      dayOfMonth: 15,
      prompts: ['What pattern is most visible now?', 'What needs to be simplified?'],
      required: false,
    },
  ],
  endCheckIn: {
    checklist: [
      {
        id: 'checklist-observer-log',
        label: 'Observer log completed at least 20 days.',
        relatedTaskIds: ['task-observer-log'],
      },
      {
        id: 'checklist-trigger-map',
        label: 'Trigger map completed at least 3 times.',
        relatedTaskIds: ['task-trigger-map'],
      },
      {
        id: 'checklist-weekly-review',
        label: 'Weekly review completed every week.',
        relatedTaskIds: ['task-weekly-review'],
      },
    ],
    questions: [
      {
        id: 'question-consistency',
        prompt: 'How consistent were you with the observer log?',
        type: 'scale',
        required: true,
        scaleMin: 1,
        scaleMax: 5,
        relatedFocus: 'attention',
      },
      {
        id: 'question-strongest-area',
        prompt: 'Which focus area felt strongest?',
        type: 'single_choice',
        required: true,
        options: ['attention', 'energy', 'habits'],
      },
      {
        id: 'question-learning',
        prompt: 'What did you learn about your triggers?',
        type: 'text',
        required: false,
      },
      {
        id: 'question-sleep-window',
        prompt: 'Did you keep the sleep window 4+ days per week?',
        type: 'boolean',
        required: false,
        relatedFocus: 'energy',
      },
    ],
    metrics: [
      {
        id: 'metric-log-days',
        label: 'Days with observer log',
        unit: 'days',
        target: 20,
        min: 0,
        max: 31,
        relatedTaskIds: ['task-observer-log'],
      },
      {
        id: 'metric-pauses',
        label: 'Total micro pauses',
        unit: 'pauses',
        target: 60,
        min: 0,
        relatedTaskIds: ['task-micro-pause'],
      },
      {
        id: 'metric-sleep-days',
        label: 'Sleep window days',
        unit: 'days',
        target: 16,
        min: 0,
        relatedTaskIds: ['task-sleep-window'],
      },
    ],
    reflectionPrompts: [
      'What was the most surprising pattern you noticed?',
      'Which task felt easiest and why?',
      'What would you simplify next month?',
    ],
  },
  outcome: {
    summary: 'Baseline awareness captured and first rituals established.',
    achievements: ['Self-observation baseline', 'Weekly reflection habit'],
    artifacts: ['Energy audit list', 'Trigger maps'],
    nextMonthGate: {
      requiredChecklistIds: ['checklist-observer-log', 'checklist-weekly-review'],
      minimumScore: 2,
      fallbackMonthId: 'month-01-awareness-foundation',
    },
  },
  mapProgress: {
    visualTheme: 'foundation',
    buildingUnlocks: [
      {
        id: 'unlock-observer-tower',
        title: 'Observer Tower',
        condition: 'Complete the observer log at least 20 days.',
        when: 'end_month',
      },
      {
        id: 'unlock-compass-room',
        title: 'Compass Room',
        condition: 'Complete at least 3 trigger maps.',
        when: 'end_month',
      },
    ],
  },
};

export default monthTemplate;
